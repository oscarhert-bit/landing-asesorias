<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carga de Documentos - Evaluación</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display.swap" rel="stylesheet">
        <link rel="stylesheet" href="/style.css"> 
    <style>
        /* --- ESTILOS ADICIONALES PARA EL ASISTENTE (v3.2) --- */

        /* Contenedor principal de una sola columna */
        .container-upload {
            max-width: 900px;
            margin: 40px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .form-col {
            width: 100%;
            border-left: none;
            border-top: 5px solid #007bff;
        }

        /* Ocultamos los pasos futuros */
        #paso-2-formulario, #paso-3-checklist, #paso-4-uploader {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Estilos para el Perfil (Paso 1) --- */
        .profile-selector { display: flex; flex-direction: column; gap: 10px; }
        .profile-selector label { display: block; padding: 15px 20px; border: 1px solid #ccc; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .profile-selector input[type="radio"] { margin-right: 12px; accent-color: #005a9c; }
        .profile-selector label:hover { background-color: #f4f7f6; }
        .profile-selector input[type="radio"]:checked + span { font-weight: 700; color: #005a9c; }

        /* --- Estilos para el Formulario (Paso 2) --- */
        .tab-navigation {
            display: flex;
            flex-wrap: wrap; /* Para que caigan en móvil */
            border-bottom: 2px solid #ccc;
            margin-bottom: 20px;
        }
        .tab-nav-button {
            padding: 10px 15px; /* Más pequeño para que quepan más */
            border: none;
            background-color: #f4f7f6;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            font-size: 0.95em;
            font-weight: 600;
        }
        .tab-nav-button.active {
            background-color: #fff;
            border-top: 1px solid #ccc;
            border-left: 1px solid #ccc;
            border-right: 1px solid #ccc;
          _  border-bottom: 2px solid #fff;
            color: #005a9c;
        }
        .tab-content { display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .form-grid .input-group { margin-bottom: 0; }
        
        /* Ocultar pestañas de Codeudor por defecto */
        .codeudor-tab, .codeudor-content {
            display: none;
        }

        .form-navigation-buttons { display: flex; justify-content: space-between; margin-top: 20px; }
        .form-nav-btn { padding: 12px 25px; background-color: #005a9c; color: white; border: none; border-radius: 5px; font-size: 1em; font-weight: 700; cursor: pointer; }
        .form-nav-btn:disabled { background-color: #aaa; cursor: not-allowed; }
        .form-nav-btn.secondary { background-color: #6c757d; }
        #btn-finalizar-formulario { background-color: #28a745; display: none; } /* Oculto por defecto */
        #btn-form-next { display: inline-block; } /* Visible por defecto */

        /* --- Estilos para el Checklist (Paso 3) --- */
        .checklist { list-style: none; padding-left: 0; background-color: #f9f9f9; border: 1px solid #eee; border-radius: 8px; padding: 20px; }
        .checklist li { font-size: 1.1em; padding: 12px 10px; border-bottom: 1px solid #e0e0e0; display: flex; justify-content: space-between; align-items: center; }
        .checklist li:last-child { border-bottom: none; }
        .checklist li strong { color: #333; }
        .checklist li .doc-help { font-weight: 700; text-decoration: none; color: #005a9c; margin-left: 10px; white-space: nowrap; }

        /* --- Estilos para el Uploader (Paso 4) --- */
        #fileInput { border: 2px dashed #007bff; padding: 20px; border-radius: 5px; cursor: pointer; text-align: center; }
        .file-list { margin-top: 15px; font-style: italic; }

        /* Hack para quitar flechas en campos de número */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

    </style>
</head>
<body>

    <div class="container-upload">
        <div class="form-col">

            <div id="paso-1-perfil">
                <h2>Paso 1: ¿Cuál es tu perfil?</h2>
                <p>Selecciona tu situación laboral para mostrarte los documentos exactos que necesitamos.</p>
                <div class="profile-selector">
                    <label><input type="radio" name="perfilCliente" value="dependiente"><span>Soy Trabajador <strong>Dependiente</strong> (con contrato)</span></label>
                    <label><input type="radio" name="perfilCliente" value="independiente"><span>Soy Trabajador <strong>Independiente</strong> (boletas de honorarios)</span></label>
                    <label><input type="radio" name="perfilCliente" value="empresa"><span>Soy <strong>Empresa</strong> (tengo mi propia sociedad)</span></label>
              _  </div>
            </div>

            <div id="paso-2-formulario">
                <h2>Paso 2: Completa tu "Estado de Situación"</h2>
                <p>Por favor, completa estos datos para agilizar tu evaluación.</p>
                
                <form id="eessForm">
                    <div class="tab-navigation">
                        <button type="button" class="tab-nav-button active" data-tab="tab-titular">1. Titular</button>
                        <button type="button" class="tab-nav-button" data-tab="tab-laboral-titular">2. Laboral (Titular)</button>
                        <button type="button" class="tab-nav-button" data-tab="tab-activos-titular">3. Activos (Titular)</button>
                        <button type="button" class="tab-nav-button codeudor-tab" data-tab="tab-codeudor">4. Codeudor</button>
                        <button type="button" class="tab-nav-button codeudor-tab" data-tab="tab-laboral-codeudor">5. Laboral (Codeudor)</button>
                        <button type="button" class="tab-nav-button codeudor-tab" data-tab="tab-activos-codeudor">6. Activos (Codeudor)</button>
                        <button type="button" class="tab-nav-button" data-tab="tab-pasivos">Últ. Pasivos (Deudas)</button>
                    </div>

                    <div id="tab-titular" class="tab-content active">
                        <h3>Datos del Titular</h3>
                        <div class="form-grid">
                            <div class="input-group"><label for="titular_nombre">Nombre Completo</label><input type="text" id="titular_nombre" name="titular_nombre" required></div>
                            <div class="input-group"><label for="titular_rut">RUT</label><input type="text" id="titular_rut" name="titular_rut" placeholder="Ej: 12345678-9" required></div>
                            <div class="input-group"><label for="titular_email">Email</label><input type="email" id="titular_email" name="titular_email" required></div>
                            <div class="input-group"><label for="titular_telefono">Teléfono</label><input type="tel" id="titular_telefono" name="titular_telefono" placeholder="Ej: +56912345678" required></div>
                            <div class="input-group"><label for="titular_fecha_nac">Fecha Nacimiento</label><input type="date" id="titular_fecha_nac" name="titular_fecha_nac"></div>
                            <div class="input-group"><label for="titular_nacionalidad">Nacionalidad</label><input type="text" id="titular_nacionalidad" name="titular_nacionalidad"></div>
                            <div class="input-group"><label for="titular_estado_civil">Estado Civil</label>
                                <select id="titular_estado_civil" name="titular_estado_civil">
                                    <option value="">Selecciona...</option>
                                    <option value="Soltero(a)">Soltero(a)</option>
                                    <option value="Casado(a)">Casado(a)</option>
section of the user's code, but the full code block will be provided in the final response)
            _                    <option value="Divorciado(a)">Divorciado(a)</option>
                                    <option value="Viudo(a)">Viudo(a)</option>
                                    <option value="AUC">Acuerdo de Unión Civil</option>
                                </select>
                            </div>
                            <div class="input-group"><label for="titular_regimen">Régimen conyugal</label>
                                <select id="titular_regimen" name="titular_regimen">
                                    <option value="">Selecciona...</option>
                                    <option value="Separación de Bienes">Separación de Bienes</option>
                                    <option value="Sociedad Conyugal">Sociedad Conyugal</option>
                                    <option value="Participación en Gananciales">Participación en Gananciales</option>
                                    <option value="No Aplica">No Aplica</option>
                              S</select>
                            </div>
                            <div class="input-group"><label for="titular_domicilio">Domicilio Particular</label><input type="text" id="titular_domicilio" name="titular_domicilio"></div>
                            <div class="input-group"><label for="titular_comuna">Comuna</label><input type="text" id="titular_comuna" name="titular_comuna"></div>
                            <div class="input-group"><label for="titular_profesion">Profesión</label><input type="text" id="titular_profesion" name="titular_profesion"></div>
                        </div>
                        <hr style="margin: 20px 0;">
                        <h3>Codeudor</h3>
                        <p>¿Vas a complementar renta con alguien (cónyuge, pareja, familiar, etc.)?</p>
                        <div class="profile-selector" style="flex-direction: row; gap: 20px;">
                            <label><input type="radio" name="complementa_renta" value="no" checked><span>No, postulo solo</span></label>
                            <label><input type="radio" name="complementa_renta" value="si"><span><strong>Sí</strong>, complemento renta</span></label>
end of truncated code block...